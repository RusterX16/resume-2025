/* ======================
   Card (Grid) ‚Äî timeline √† droite, points aux extr√©mit√©s, dur√©e centr√©e
   ====================== */
.card {
  /* Vars (puissances de 2) */
  --dates-w: 128px;   /* 128 au lieu de 120 */
  --tl-w: 16px;       /* 16 au lieu de 12 */
  --line-w: 2px;      /* √©paisseur barre */
  --dates-gap: 8px;   /* √©cart texte <-> barre */

  /* Layout & box */
  display: grid;
  grid-template-columns: 1fr var(--dates-w);
  gap: 16px;
  align-items: stretch;

  background: #fff;
  border: 1px solid #d1d5db;
  box-shadow: 0 2px 8px rgba(15,23,42,.06), 0 1px 2px rgba(0,0,0,.04); /* 8 au lieu de 10 */
  border-radius: 8px;
  padding: 16px;       /* 16 au lieu de 12/14 */
  margin: 8px;

  .body { min-width: 0; }

  /* --- Titre + badge --- */
  .role-line {
    display: flex;
    align-items: center;
    gap: 8px;

    .role {
      margin: 0;
      font-size: .85rem;
      font-weight: 700;
      color: #111827;
      overflow-wrap: anywhere;
    }
    .contract {
      font-size: .65rem;
      color: #475569;
      background: #f3f4f6;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 2px 8px;
      white-space: nowrap;
    }
  }

  /* --- Meta (texte simple) --- */
  .meta {
    margin-top: 4px;   /* 4 au lieu de 2 */
    font-size: .72rem;
    color: #6b7280;
    font-weight: 500;

    padding: 0;
    background: transparent;
    border: 0;
    border-radius: 0;

    .sep { opacity: .55; }
  }

  /* Localisation (optionnelle) */
  .loc {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    color: #6b7280;
    font-weight: 600;
    white-space: nowrap;
  }
  .loc::before { content: "üìç"; line-height: 1; }

  /* --- Description --- */
  .desc {
    margin-top: 8px;
    color: #374151;
    font-size: .78rem;
    line-height: 1.3;
  }
  &.compact .desc,
  .desc.compact {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    margin-top: 4px;
  }

  /* --- Tags --- */
  .stack {
    margin-top: 8px;   /* 8 au lieu de 10 */

    .tag {
      display: inline-block;
      font-size: .62rem;
      line-height: 1;
      padding: 4px 8px;                     /* 4/8 au lieu de 6/8 */
      margin: 0 8px 8px 0;                  /* 8 au lieu de 6 */
      border-radius: 8px;
      background: #eff6ff;
      border: 1px solid #dbeafe;
      color: #1d4ed8;
      white-space: nowrap;
    }
    .tag.more {
      background: #f3f4f6;
      border-color: #e5e7eb;
      color: #475569;
    }
  }

  /* --- Dates (timeline √† droite) --- */
  .dates {
    display: grid;
    grid-template-columns: 1fr var(--tl-w);
    grid-template-rows: min-content 1fr min-content; /* end / dur√©e / start */
    align-items: center;
    column-gap: var(--dates-gap);
    font-weight: 600;
    font-size: .70rem;
    color: #374151;
    text-transform: none;
    position: relative;

    .end, .start {
      grid-column: 1;
      text-align: right;
      justify-self: end;
      align-self: center;
      padding: 2px 0;
      white-space: nowrap;
    }
    .end   { grid-row: 1; }
    .start { grid-row: 3; }

    .duration {
      grid-column: 1;
      grid-row: 2;
      align-self: center;
      justify-self: end;
      margin-right: calc(var(--dates-gap) + 2px);
      font-size: .65rem;
      font-weight: 500;
      color: #6b7280;
      white-space: nowrap;
    }

    .duration-line {
      grid-column: 2;
      grid-row: 1 / -1;
      align-self: stretch;
      justify-self: center;
      width: var(--line-w);
      background: linear-gradient(to bottom, #d1d5db, #e5e7eb);
      border-radius: 2px;
      position: relative;
      margin: 0;
    }
    .duration-line::before,
    .duration-line::after {
      content: '';
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 8px; height: 8px;           /* 8 au lieu de 10 */
      border-radius: 50%;
      background: #374151;
      border: 2px solid #fff;
      box-shadow: 0 1px 2px rgba(0,0,0,.15); /* 2 au lieu de 3 */
    }
    .duration-line::before { top: 0; }
    .duration-line::after  { bottom: 0; }
  }

  /* ======================
     Mode Compact
     ====================== */
  &.compact {
    --dates-w: 96px;   /* multiple de 16 */
    --tl-w: 16px;      /* identique pour r√©gularit√© */
    --line-w: 2px;

    gap: 8px;          /* 8 au lieu de 10 */
    padding: 8px 16px; /* 8/16 au lieu de 8/10 */

    .role-line { gap: 8px; }
    .role-line .role { font-size: .78rem; }
    .role-line .contract { font-size: .60rem; padding: 2px 8px; border-radius: 8px; }

    .meta { font-size: .68rem; }
    .desc { font-size: .70rem; }

    .stack { margin-top: 8px; }
    .stack .tag { font-size: .58rem; padding: 4px 8px; margin: 0 8px 8px 0; }

    .dates {
      font-size: .65rem;
      .duration { font-size: .62rem; margin-right: calc(var(--dates-gap) + 2px); }
      .duration-line::before,
      .duration-line::after { width: 8px; height: 8px; border-width: 2px; } /* 8/2 */
    }
  }
}
